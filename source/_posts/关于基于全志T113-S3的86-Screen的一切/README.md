---
title: å…³äºã€ŒåŸºäºå…¨å¿—T113-S3çš„86-Screenã€çš„ä¸€åˆ‡
excerpt: ä»Šå¤©ï¼ä¸€èµ·æ¥å¤åˆ»ğŸ™†ï¼
tags: [Allwinner, T113-S3, Ubuntu]
# index_img: /img/post/11.jpg
# banner_img: /img/post/12.jpg
index_img: https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-1.jpg
banner_img: https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image.jpg
categories: Project Page
comment: 'twikoo'
# hide: true
date: 2025-2-1 15:10:00
---

### å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡
### Author: kkl

{% note warning %}

è¯¥ç¬”è®°ç›®å‰å¤„äºç§¯æå¼€å‘é˜¶æ®µã€‚

{% endnote %}

{% note info %}
**å¾€æœŸç›¸å…³æ–‡ç« æ€»è§ˆï¼š**
- [å…¨å¿—T113-S3çš„TinaLinuxç¼–è¯‘æµç¨‹è®°å½•](https://zhangkeliang0627.github.io/2024/11/24/å…¨å¿—T113-S3çš„TinaLinuxç¼–è¯‘æµç¨‹è®°å½•/README/)
- [åœ¨å…¨å¿—T113-S3çš„TinaLinuxä¸Šè¿è¡ŒLVGL](https://zhangkeliang0627.github.io/2024/12/22/åœ¨å…¨å¿—T113-S3çš„TinaLinuxä¸Šè¿è¡ŒLVGL/README/)
- [åœ¨å…¨å¿—T113-S3çš„TinaLinuxä¸Šæ·»åŠ é©±åŠ¨æ”¯æŒ](https://zhangkeliang0627.github.io/2025/01/20/åœ¨å…¨å¿—T113-S3çš„TinaLinuxä¸Šæ·»åŠ é©±åŠ¨æ”¯æŒ/README/)
{% endnote %}

{% note success %}
hahahaæ ‡é¢˜æœ‰ç‚¹å¹å¤§äº†å“ˆï¼Œè™½ç„¶è¯´æ˜¯å…³äºä¸€åˆ‡ï¼Œä½†å†ç»†èŠ‚çš„ä¸œè¥¿çš„è¯´ä¸å®Œçš„ã€‚ä½†æ˜¯æˆ‘ä¼šæŠŠæˆ‘ä¸Šæ‰‹ä»¥åæ‘¸ç´¢çš„æ•´ä¸ªå¿ƒè·¯å†ç¨‹å°½é‡åœ°éƒ½è¯¦ç»†å±•ç°å‡ºæ¥ã€‚æœ¬ç¯‡æ–‡ç« å›´ç»•ç€[åŸºäºT113-S3çš„86-Screen](https://oshwhub.com/fanhuacloud/t113-s3-86panel)çš„å¤ç°å±•å¼€ï¼Œé¡¹ç›®ä½œè€…by[@FanHuaCloud](https://oshwhub.com/fanhuacloud/works)
{% endnote %}


<!-- {% gi 2 2 %}

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-1.jpg" alt="snapshot-1" width = "400" height = "200" style="border-radius: 10px;">
<figcaption>snapshot-1</figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-2.jpg" alt="snapshot-2" width = "400" height = "200" style="border-radius: 10px;">
<figcaption>snapshot-2</figcaption>
</figure>

{% endgi %} -->

{% gi 2 2 %}

<figure>
<img src="https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-1.jpg" alt="snapshot-1" width = "400" height = "200" style="border-radius: 10px;">
<figcaption>snapshot-1</figcaption>
</figure>

<figure>
<img src="https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-2.jpg" alt="snapshot-2" width = "400" height = "200" style="border-radius: 10px;">
<figcaption>snapshot-2</figcaption>
</figure>

{% endgi %}

---

### å†™åœ¨å‰é¢

**T113-S3**æ˜¯**å…¨å¿—**çš„ä¸€æ¬¾éå¸¸ä¸é”™çš„èƒ½å¤Ÿè·‘Linuxç³»ç»Ÿçš„Socï¼Œè¯¥èŠ¯ç‰‡é‡‡ç”¨**åŒæ ¸A7**ï¼Œ**ä¸»é¢‘é«˜è¾¾1.2GHz**ï¼Œå…·å¤‡**é«˜æ•ˆèƒ½**å’Œ**ä½åŠŸè€—**çš„ç‰¹ç‚¹ï¼Œ**ç‰‡ä¸Šå†…å­˜128MB**ï¼Œ**æ”¯æŒç¡¬ä»¶è§£ç **ï¼Œå’ŒD1s Pin to Pinï¼Œæ”¯æŒç›¸äº’æ›¿æ¢æ”¯æŒå…¨å¿—æä¾›çš„Tina Linux SDKï¼Œæ–‡æ¡£é½å…¨ï¼Œå¯¹äºDIYç©å®¶æ¥è¯´ç”¨äºåˆ¶ä½œä¸€äº›å¸¦æ˜¾ç¤ºå±çš„å°è®¾å¤‡æ˜¯éå¸¸å®Œç¾äº†ã€‚

å‰é˜µå­åœ¨â€œæµ·é²œå¸‚åœºâ€ä½ä»·å…¥äº†éŸ¦ä¸œå±±çš„T113-S3çš„å¼€å‘æ¿ï¼Œç»è¿‡ä¸€ç•ªæ‘¸ç´¢ä»¥åå‘ç°äº†TinaLinuxè¿™ä¸ªæ–°å¥‡çš„ä¸œè¥¿ï¼Œå¬è¯´æ˜¯å…¨å¿—åŸºäº`Openwrt`è‡ªç ”çš„ç³»ç»Ÿï¼ˆè¢«æˆè°‘ä¸ºå…¨å¿—å®¶çš„å°å¥³å„¿ã€‚

å‰é¢å·²ç»æŠ˜è…¾å¾—å¤Ÿå¤šéŸ¦ä¸œå±±çš„å…¨å¿—T113-S3å¼€å‘æ¿äº†ï¼Œä»å†…æ ¸ç¼–è¯‘ã€è¿è¡ŒLVGLåˆ°æ–°å¢é©±åŠ¨éƒ½ä½“éªŒäº†ä¸ªéï¼Œç°åœ¨å’±ä»¬æƒ³è¦å¼€å‘å±äºè‡ªå·±çš„åŸºäºå…¨å¿—T113-S3çš„è®¾å¤‡äº†ã€‚æ­£å¥½é‡è§äº†è¿™ä¸ªä¼˜ç§€çš„å¼€æºé¡¹ç›®**åŸºäºT113-S3çš„86-Screen**ï¼Œä½œè€…äº‹æ— å·¨ç»†å¾—äº¤ä»£äº†ä»é›¶åˆ°ä¸€æ­å»ºå†…æ ¸ç¼–è¯‘çš„å¹³å°å¹¶ä¸”å¼€æºäº†è¯¦ç»†çš„æ–‡æ¡£å’Œè™šæ‹Ÿæœºï¼Œéå¸¸é€‚åˆåˆå­¦è€…ä¸Šæ‰‹å­¦ä¹ ï¼ˆæ„Ÿè°¢@FanHuaCloudå¯¹æ­¤è¿›è¡Œå¼€æºï¼Œäº‹ä¸å®œè¿Ÿï¼Œæˆ‘ä»¬ç›´æ¥å¼€å§‹ï¼


**_æœ¬ç¯‡æ–‡ç« å°†ç®€è¿°å¦‚ä½•ä»é›¶åˆ°ä¸€å¤åˆ»ã€ŒåŸºäºT113-S3çš„86-Screenã€ã€‚_**

#### æˆ‘çš„ç¯å¢ƒ

- è™šæ‹Ÿæœºï¼šVMware Ubuntu 20.04

{% note success %}
æœ€è¿‘æ‰å¾—çŸ¥ï¼Œåœ¨å¹´å°¾çš„æ—¶å€™VMwareè¢«åšé€šå¹¶è´­äº†ï¼Œå¯ä»¥æ”¾å¼€å…è´¹ä½¿ç”¨å•¦ï¼æ‰€ä»¥æœ¬æ¬¡æƒ³è¦å°è¯•ä¸€ä¸‹ä½¿ç”¨VMwareçš„è™šæ‹Ÿæœºå¹³å°è¿›è¡Œæ“ä½œï¼
{% endnote %}

{% note secondary %}
> è™šæ‹Ÿæœºè·å–é“¾æ¥: https://pan.baidu.com/s/1INtes0puPvBo2v6UM7_SBA æå–ç : u4vt 

è¿™ä¸ªè™šæ‹Ÿæœºæ˜¯äº¤æµç¾¤ä¸­åˆ†äº«çš„ï¼Œå¦‚æœä½ ä¸æƒ³æŠ˜è…¾å†…æ ¸çš„è¯ï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥ç”¨ï¼Œæˆ–è€…ä½ æƒ³å­¦ä¹ ä¸€ä¸‹å†…æ ¸ç¼–è¯‘ä¿®æ”¹é…ç½®æµç¨‹ï¼Œå¯ä»¥æŒ‰ç…§ä½œè€…çš„æ•™ç¨‹æ¥ï¼ˆåœ¨ç«‹åˆ›ç¡¬ä»¶å¼€æºçš„é™„ä»¶ï¼š`Tina SDKæ„å»ºæŒ‡å—`ï¼‰ã€‚

æˆ–è€…æˆ³è¿™é‡Œè·å–ï¼š[Tina SDKæ„å»ºæŒ‡å—.pdf](https://zhangkeliang0627.github.io/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/TinaSDKæ„å»ºæŒ‡å—.pdf)

**æˆ‘æ¥ä¸‹æ¥çš„æ•™ç¨‹ä¼šä»¥åˆ†äº«çš„è™šæ‹Ÿæœºä¸ºåŸºç¡€æ¥è¿›è¡Œï¼Œä¸ºäº†å°½é‡ä¿æŒç³»ç»Ÿå¼€å‘ç¯å¢ƒç»Ÿä¸€å“ˆã€‚**
{% endnote %}

- å¼€å‘æ¿ï¼šåŸºäºT113-S3çš„86-Screen
- Tina-Linuxç‰ˆæœ¬ï¼šlinux-5.4

---

### å¼€å§‹

#### ä¸‹è½½å¹¶å®‰è£…VMware

è¿™ä¸ªè‡ªè¡Œå»å®˜ç½‘ä¸‹è½½å°±å¥½ï¼Œæˆ–è€…ä»€ä¹ˆåˆ«çš„æ¸ é“ä¸‹è½½éƒ½è¡Œï¼Œè®°å¾—è¦ä¸‹è½½æœ€æ–°çš„å…è´¹çš„ç‰ˆæœ¬å°±è¡Œã€‚

#### PCBæ‰“æ ·ä¸å™¨ä»¶é‡‡è´­

<!-- ![PCB-3D](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image.jpg) -->
![PCB-3D](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image.jpg)

- æ‰“æ ·å‚æ•°ï¼š1.6mmã€æ— é˜»æŠ—éœ€æ±‚

ç¡¬ä»¶ç„Šæ¥è¿™éƒ¨åˆ†å°±ä¸å¤šèµ˜è¿°å•¦ï¼Œç†Ÿèƒ½ç”Ÿå·§ï¼è€Œä¸”ç„Šæ¥éš¾åº¦ä¸é«˜ï¼Œå…ƒå™¨ä»¶åœ¨æŸå®éƒ½èƒ½ä¹°é½ã€‚

{% note warning %}

**æ³¨æ„1ï¼š`spinand`è¦è´­ä¹°`w25n02`è¿™æ¬¾èŠ¯ç‰‡ï¼Œè€Œä¸æ˜¯åŸç†å›¾é‡Œé¢çš„`w25q128`ï¼ä½œè€…åº”è¯¥æ˜¯æ²¡æœ‰æ›´æ­£åŸç†å›¾ã€‚**

**æ³¨æ„2ï¼šå±å¹•é‚£äº›å¤§ä»¶å°½é‡ä¹°ä½œè€…æ¨èçš„å•†å®¶ï¼Œä¸ç„¶å¯èƒ½ä¼šé‡åˆ°ä¸€äº›ç¡¬ä»¶bugï¼Œä¿®å¤èµ·æ¥å¾ˆå¤´ç–¼çš„ï¼**

{% endnote %}

#### è™šæ‹Ÿæœºçš„è®¾ç½®

##### è´¦å·

äº¤æµç¾¤ä¸­æä¾›çš„è™šæ‹Ÿæœºæœ‰ä¸‰ä¸ªè´¦å·ï¼š

| è´¦å· | å¯†ç  | 
| :-: | :-: |
| taiji | taiji | 
| ubuntu20 | ubuntu20 | 
| root | root |

{% note warning %}

æ³¨æ„ï¼šrootè´¦æˆ·æ˜¯éšè—çš„ï¼Œæ˜¯ç®¡ç†å‘˜ï¼Œè¦åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ`su -`ï¼Œè¾“å…¥å¯¹åº”çš„å¯†ç æ‰å¯ä»¥ä½¿ç”¨ã€‚`tina-sdk`æ”¾åœ¨taijiè´¦æˆ·ä¸­ã€‚

taiji å’Œ ubuntu20 è¿™ä¸¤ä¸ªè´¦æˆ·éƒ½æ˜¯æ²¡æœ‰`sudo`æƒé™çš„ï¼Œä½ éœ€è¦åœ¨rootè´¦æˆ·ä¸‹ç»™å®ƒä»¬æ·»åŠ åˆ°`sudo`ç»„ï¼š

```bash
su - # è¿›å…¥rootè´¦æˆ·

usermod -aG sudo taiji  

usermod -aG sudo ubuntu20  

exit # é€€å‡ºrootè´¦æˆ·

groups taiji # ç”¨è¿™ä¸ªå‘½ä»¤çœ‹ä¸€ä¸‹æ˜¯å¦åˆ†é…sudoç»„æˆåŠŸ
groups ubuntu20 
```

{% endnote %}

##### é…ç½‘

äº¤æµç¾¤åˆ†äº«çš„è™šæ‹Ÿæœºä¸€å¼€å§‹æ˜¯ä¸Šä¸äº†ç½‘çš„ï¼Œéœ€è¦æ‰§è¡Œä¸€äº›æ­¥éª¤ï¼ˆè·Ÿç€é“¾æ¥ä¸­çš„æ•™ç¨‹ï¼šhttps://blog.csdn.net/qq_35291429/article/details/132070006

#### å†…æ ¸ç¼–è¯‘

å…·ä½“çš„å†…æ ¸ç¼–è¯‘è¿‡ç¨‹è¯·å‚è€ƒæˆ‘ä¹‹å‰çš„æ–‡ç« ï¼š[å…¨å¿—T113-S3çš„TinaLinuxç¼–è¯‘æµç¨‹è®°å½•](https://zhangkeliang0627.github.io/2024/11/24/å…¨å¿—T113-S3çš„TinaLinuxç¼–è¯‘æµç¨‹è®°å½•/README/)

è®°å¾—é€‰æ‹©å¼€å‘æ¿è¦é€‰`t113_pi-tina`

<!-- ![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-2.png) -->
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-2.png)

...

##### FAQ

{% note primary %}

**Qï¼šTINAåœ¨ç¼–è¯‘æ‰“åŒ…PACKä¹‹åå‡ºç°ERROR: unable to open file boot-resource.fexï¼Ÿ**

<!-- ![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-3.jpg) -->
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-3.jpg)

Aï¼šè§£å†³æ–¹æ³•ï¼šå®‰è£…`i386 gcc`å…¼å®¹åŒ… `sudo apt-get install libc6:i386 libgcc1:i386 libstdc++6:i386 -y`

è§£å†³å‚è€ƒ1ï¼šhttps://blog.csdn.net/zengsenhua/article/details/129946001
è§£å†³å‚è€ƒ2ï¼šhttps://bbs.aw-ol.com/topic/804/tinaåœ¨ç¼–è¯‘æ‰“åŒ…packä¹‹åæœ‰é—®é¢˜/10

{% endnote %}

{% note primary %}

**Qï¼šTINAåœ¨ç¼–è¯‘æ—¶å‡ºç°ERRORè¯¸å¦‚æ­¤ç±»: /bin/sh:1: cc: not foundï¼Ÿ**

<!-- ![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-3.png) -->
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-3.png)

Aï¼šè§£å†³æ–¹æ³•ï¼šä½ ç¼–è¯‘ç¯å¢ƒæ²¡æå¥½ï¼Œ`gcc`çš„å®‰è£…åŒ…æ²¡è£…ä¸Šï¼Œä¼°è®¡è¿˜æœ‰è®¸å¤šå®‰è£…åŒ…éƒ½æ²¡æœ‰è£…ä¸Šï¼Œæ‰€ä»¥è¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé‡æ–°å®‰è£…ç¼–è¯‘ç¯å¢ƒï¼ˆæ ¹æ®ä½ çš„ubuntuçš„ç‰ˆæœ¬ï¼‰ï¼š

```bash
# for ubuntu20.04 version
# ç›´æ¥å…¨éƒ¨å¤åˆ¶åˆ°å‘½ä»¤è¡Œæ‰§è¡Œå³å¯
sudo apt update -y 
sudo apt full-upgrade -y 
sudo apt install -y ack antlr3 asciidoc autoconf automake autopoint binutils bison 
build-essential \ 
bzip2 ccache cmake cpio curl device-tree-compiler fastjar flex gawk gettext gcc
multilib g++-multilib \ 
git gperf haveged help2man intltool libc6-dev-i386 libelf-dev libfuse-dev 
libglib2.0-dev libgmp3-dev \ 
libltdl-dev libmpc-dev libmpfr-dev libncurses5-dev libncursesw5-dev libpython3
dev libreadline-dev \ 
libssl-dev libtool lrzsz mkisofs msmtp ninja-build p7zip p7zip-full patch pkgconf 
python2.7 python3 \ 
python3-pyelftools python3-setuptools qemu-utils rsync scons squashfs-tools 
subversion swig texinfo \ 
uglifyjs upx-ucl unzip vim wget xmlto xxd zlib1g-dev \
sudo apt-get install libc6:i386 libgcc1:i386 libstdc++6:i386 -y
```

```bash
# for ubuntu18.04 version 
# ç›´æ¥å…¨éƒ¨å¤åˆ¶åˆ°å‘½ä»¤è¡Œæ‰§è¡Œå³å¯
sudo apt-get install build-essential subversion git libncurses5-dev zlib1g-dev gawk flex quilt libssl-dev xsltproc libxml-parser-perl mercurial bzr ecj cvs unzip lib32z1 lib32z1-dev lib32stdc++6 libstdc++6 libc6:i386 libstdc++6:i386 lib32ncurses5 lib32z1 -y
```

è§£å†³å‚è€ƒï¼šhttps://bbs.aw-ol.com/topic/2913/tinaç¼–è¯‘å‡ºç°md5sumé”™è¯¯/4

{% endnote %}

#### å…³äºtina-sdkçš„å‹ç¼©ã€è½¬ç§»ä¸è§£å‹

æœ‰æ—¶å€™æˆ‘ä»¬å¯èƒ½éœ€è¦å°†å½“å‰è™šæ‹Ÿæœºå½“ä¸­çš„tina-sdkæ‰“åŒ…å‹ç¼©ï¼Œå‘é€åˆ°å¦å¤–ä¸€ä¸ªè™šæ‹Ÿæœºå½“ä¸­è§£å‹ç¼–è¯‘ã€‚å› ä¸ºæˆ‘ä»¬ä¸å¯èƒ½åˆå»å®˜ç½‘æ‹‰å–ä¸€ä¸ªå…¨æ–°çš„sdkç„¶ååˆè‡ªå·±ä»å¤´åˆ°å°¾ä¿®æ”¹ä¸€éå†…æ ¸ï¼Œè¿™æ ·å¾ˆéº»çƒ¦ã€‚å› æ­¤ï¼Œä»¥ä¸‹æä¾›ä¸€äº›å‹ç¼©ä¸è§£å‹çš„æŒ‡ä»¤ï¼ˆtarå’Œ7zï¼‰ï¼Œæ¨èä½¿ç”¨7zï¼Œå‹ç¼©å’Œè§£å‹çš„é€Ÿåº¦éƒ½æ¯”è¾ƒå¿«ï¼

##### tar

åœ¨ubuntuå½“ä¸­ï¼Œtaré€šå¸¸éƒ½æ˜¯é¢„å®‰è£…çš„ï¼Œä¸éœ€è¦æ‰‹åŠ¨å®‰è£…ï¼ˆå¦‚æœè¦ï¼Œè‡ªè¡Œå»é—®é—®aiå®‰è£…ä¸€ä¸‹å§ï¼

```bash
# å…ˆcdåˆ° tina-sdk æ–‡ä»¶å¤¹çš„ä¸Šçº§ç›®å½•
# å‹ç¼© tina-sdk ç›®å½•  
tar -cjvf tina-sdk.tar.bz2 tina-sdk
```

```bash
# è§£å‹ tina-sdk æ–‡ä»¶å¤¹åˆ°å½“å‰ç›®å½•
tar -xjvf tina-sdk.tar.bz2
```

##### 7z

```bash
# å®‰è£…ä¾èµ–
sudo apt-get install p7zip-full
```

```bash
# å…ˆcdåˆ° tina-sdk æ–‡ä»¶å¤¹çš„ä¸Šçº§ç›®å½•
# å‹ç¼© tina-sdk ç›®å½•  
7z a tina-sdk.7z tina-sdk 
```

```bash
# è§£å‹ tina-sdk æ–‡ä»¶å¤¹åˆ°å½“å‰ç›®å½•
7z x tina-sdk.7z
```

{% note warning %}

æ³¨æ„ï¼šè½¬ç§»åˆ°å…¶ä»–è™šæ‹Ÿæœºåï¼Œè®°å¾—è¦å°†tina-sdkå½“ä¸­çš„outæ–‡ä»¶å¤¹åˆ é™¤å¹²å‡€ï¼Œç„¶å`make clean`ï¼Œå†å»åšç¼–è¯‘æ‰“åŒ…çš„æ“ä½œå“¦ï¼å¦åˆ™ä¼šé‡åˆ°è·¯å¾„ä¸ä¸€è‡´çš„æŠ¥é”™é—®é¢˜ï¼Œæ˜¯å› ä¸ºæ–‡ä»¶å‘ç”Ÿäº†ç§»åŠ¨ï¼Œä»å‰çš„ç¼–è¯‘ç»“æœåœ¨è¿™é‡Œå·²ç»ä¸é€‚ç”¨äº†ã€‚

{% endnote %}

#### å…³äºå¦‚ä½•è§£å†³Read-only file system

> æ–‡ç« å‚è€ƒ1ï¼šhttps://bbs.aw-ol.com/topic/1000/åœ¨d1çš„tinaä¸Šæ•´ä¸Šoverlayfs
> æ–‡ç« å‚è€ƒ2ï¼šhttps://bbs.aw-ol.com/topic/3461/é—®é¢˜è§£å†³-ä½¿ç”¨sdå¡å¯åŠ¨ç³»ç»Ÿæ—¶-æ–‡ä»¶ç³»ç»Ÿä¸ºåªè¯»çŠ¶æ€

æ‰§è¡Œ`make menuconfig`ï¼Œæ‰¾åˆ°å¯¹åº”ç›®å½•ï¼Œå‹¾é€‰`e2fsprogs`ï¼Œå¦‚å›¾ï¼š
<!-- ![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-4.png) -->
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-4.png)

ç„¶ååˆ†åŒºè¡¨`sys_partition.fex`å½“ä¸­åŠ å…¥`rootfs_data`ï¼ˆè‹¥å·²æœ‰ï¼Œå°±ä¸ç”¨ï¼Œæ“ä½œå¦‚ä¸‹ï¼š
```bash
# æ‰“å¼€åˆ†åŒºè¡¨ï¼Œå¤§è‡´è·¯å¾„å¦‚ä¸‹
gedit ~/tina-d1-h/device/config/chips/t113/configs/100ask/sys_partition.fex

# åŠ å…¥rootfs_dataï¼Œå¦‚æœå·²ç»æœ‰äº†ï¼Œå°±ä¸éœ€è¦åŠ å…¥
[partition]
    name = rootfs_data
    size = 25600
    user_type = 0x8000
```

æœ€åå°±å¯ä»¥ç¼–è¯‘æ‰“åŒ…ï¼Œçƒ§å½•ä¸Šç”µæµ‹è¯•ã€‚é¡ºåˆ©çš„è¯ï¼Œæ­¤æ—¶åœ¨`/mnt/UDISK`æ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ–°æ–‡ä»¶å°±èƒ½å¤ŸæˆåŠŸå•¦ï¼ˆæˆ–è€…adbä¼ è¾“æ–‡ä»¶å°±èƒ½æˆåŠŸå•¦ï¼

#### æ·»åŠ ubootå¯åŠ¨logo

> æ–‡ç« å‚è€ƒï¼šhttps://dshanpi.100ask.net/docs/T113s3-Industrial/part7/AddABootLogoImageInUboot/

##### å‡†å¤‡å›¾ç‰‡

å‡†å¤‡ä¸€å¼ å›¾ç‰‡ï¼Œ**åå­—å’Œæ ¼å¼ä¸€å®šä¸º`bootlogo.bmp`!!!**

å›¾ç‰‡çš„åˆ†è¾¨ç‡è¦æ±‚åœ¨å±å¹•çš„åˆ†è¾¨ç‡èŒƒå›´å†…ï¼Œå¦‚è¿™é‡Œä½¿ç”¨çš„86å±çš„åˆ†è¾¨ç‡æ˜¯480x480åƒç´ ï¼Œæ‰€ä»¥æˆ‘ä»¬å‡†å¤‡çš„å›¾ç‰‡çš„åˆ†è¾¨ç‡å°±è¦å°äº480x480ï¼Œæˆ‘åœ¨è¿™å‡†å¤‡äº†ä¸€å¼ å›¾ç‰‡ï¼ˆæˆ‘çš„å¤´åƒï¼Œ240x240åƒç´ ï¼š

<!-- ![bootlogo.bmp](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/bootlogo.bmp) -->
![bootlogo.bmp](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/bootlogo.bmp)

å°†è¿™ä¸ªå›¾ç‰‡æ‹·è´åˆ°`~/tina-sdk/device/config/chips/t113/configs/pi/configs/`

##### ä¿®æ”¹é…ç½®

æ‰§è¡Œ`make kernel_menuconfig`

> \>Device Drivers -> Graphics support -> Bootup logo

{% gi 2 2 %}

<!-- ![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image.png)
![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-1.png) -->
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image.png)
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-1.png)
{% endgi %}

ä¿®æ”¹`sun8iw20p1_uart3_defconfig`ï¼Œè·¯å¾„ä¸º`/home/taiji/tina-sdk/lichee/brandy-2.0/u-boot-2018/configs/sun8iw20p1_uart3_defconfig`ï¼Œåœ¨æœ«å°¾åŠ ä¸Šä¸‹é¢ä¸¤å¥ï¼š

```shell
CONFIG_BOOT_GUI=y
CONFIG_LCD_SUPPORT_ST7701S_86=y
```

##### ç¼–è¯‘ã€æµ‹è¯•
ç„¶åï¼Œç¼–è¯‘æ‰“åŒ…ï¼Œä¸Šç”µæµ‹è¯•ï¼Œçœ‹çœ‹æ•ˆæœå§ï¼

<!-- ![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-4.jpg) -->
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-4.jpg)

##### BTW

å¦‚æœä½ éœ€è¦ä¸ºå…¶ä»–çš„å±å¹•æ·»åŠ ubootå¯åŠ¨logoï¼Œä½ éœ€è¦åœ¨uboot`brandy2.0`å½“ä¸­æ‰‹åŠ¨é…ç½®ä¸€ä¸‹å±å¹•é©±åŠ¨å“¦ï¼åŸç†å’Œåœ¨å†…æ ¸`linux5.4`é…ç½®å±å¹•é©±åŠ¨å·®ä¸å¤šçš„ã€‚

```bash
# linux5.4 å†…æ ¸ä¸­å±å¹•é©±åŠ¨æ–‡ä»¶è·¯å¾„
cd ~/tina-sdk/lichee/linux-5.4/drivers/video/fbdev/sunxi/disp2/disp/lcd

# brandy2.0 ubootä¸­å±å¹•é©±åŠ¨æ–‡ä»¶è·¯å¾„
cd ~/tina-sdk/lichee/brandy-2.0/u-boot-2018/drivers/video/sunxi/disp2/disp/lcd
```

ç„¶åå°†`CONFIG_LCD_SUPPORT_ST7701S_86=y`ï¼Œä¿®æ”¹æˆä½ çš„å±å¹•æ”¯æŒå°±okå•¦ï¼

#### tplayerdemoçš„ä½¿ç”¨æ–¹æ³•

> æ–‡ç« å‚è€ƒ1ï¼š[D1sä½¿ç”¨tplayerdemoæ’­æ”¾badapple](https://bbs.aw-ol.com/topic/1238/d1sèŠ¯ç‰‡-å¼€å‘æ¿-ready-å‡†å¤‡æ”¾å‡ºæ¥ç»™å¤§å®¶ç©/8)
> æ–‡ç« å‚è€ƒ2ï¼š[T113-S3çš„éŸ³é¢‘è¾“å…¥ä¸è¾“å‡ºæ–¹æ³•](https://bbs.aw-ol.com/topic/2196/å…¨å¿—T113-S3_100ask-éŸ³é¢‘è¾“å…¥ä¸è¾“å‡º)

tplayerdemoæ˜¯`tina-sdk`è‡ªå¸¦çš„ç¨‹åºï¼Œé‡Œé¢åŸºäºå…¨å¿—å¼€æ”¾çš„ç¡¬ä»¶è§£ç APIæ¥å£å®ç°äº†å¤šç§æ ¼å¼çš„éŸ³è§†é¢‘çš„æ’­æ”¾ã€‚

##### å†…æ ¸é…ç½®ï¼ˆç¼–è¯‘ç¨‹åº

é¦–å…ˆï¼Œæ ¹æ®å…¨å¿—ç»™çš„å¼€å‘æŒ‡å—[Tina_Linux_å¤šåª’ä½“è§£ç _å¼€å‘æŒ‡å—](https://zhangkeliang0627.github.io/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/Tina_Linux_å¤šåª’ä½“è§£ç _å¼€å‘æŒ‡å—.pdf)ä¿®æ”¹å†…æ ¸é…ç½®ï¼Œå‹¾é€‰å¯¹åº”çš„é€‰é¡¹âœ”

é…ç½®å¥½å†…æ ¸ä»¥åï¼Œé‡æ–°ç¼–è¯‘æ‰“åŒ…ï¼Œçƒ§å½•ä¸Šç”µã€‚

##### æ’­æ”¾éŸ³è§†é¢‘ï¼ˆè¿è¡Œç¨‹åº

ç„¶åæˆ‘ä»¬å°±å¯ä»¥åœ¨å¼€å‘æ¿çš„å‘½ä»¤è¡Œä¸­ä½¿ç”¨`tplayerdemo`å‘½ä»¤æ’­æ”¾éŸ³è§†é¢‘å•¦ï¼Œå¦‚æ’­æ”¾è§†é¢‘`tplayerdemo /mnt/UDISK/video.mp4`ã€‚

{% note warning %}

**æ³¨æ„ï¼šåœ¨æ‰§è¡Œ`tplayerdemo`å‘½ä»¤ä¹‹å‰ï¼Œè¦ç¡®è®¤éŸ³é¢‘é€šè·¯æ˜¯å¦æ‰“å¼€ï¼ˆæ˜¯å¦è§£é™¤é™éŸ³ï¼‰ï¼Œè¦æ‰§è¡Œ`amixer -D hw:audiocodec cset name='Headphone Switch' 1`æ‰“å¼€éŸ³é¢‘é€šè·¯ï¼Œå¦åˆ™éŸ³è§†é¢‘æ’­æ”¾å‡ ç§’é’Ÿå°±ä¼šå¡æ­»ï¼**

{% endnote %}

> æˆ‘ä»¬å¯ä»¥ä½¿ç”¨`amixer`å‘½ä»¤æ¥æŸ¥çœ‹ä¸ç¼–è¾‘éŸ³é¢‘ç›¸å…³çš„è®¾å¤‡æƒ…å†µï¼š
>
> {% fold info @æŸ¥çœ‹éŸ³é¢‘ç›¸å…³çš„è®¾å¤‡èŠ‚ç‚¹çš„æƒ…å†µ %}
```bash
# å‘½ä»¤amixerï¼šæŸ¥çœ‹éŸ³é¢‘ç›¸å…³çš„è®¾å¤‡èŠ‚ç‚¹çš„æƒ…å†µ
root@TinaLinux:/# amixer

Simple mixer control 'Headphone',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'Headphone volume',0
  Capabilities: volume volume-joined
  Playback channels: Mono
  Capture channels: Mono
  Limits: 0 - 7
  Mono: 4 [57%]
Simple mixer control 'FMINL gain volume',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'FMINR gain volume',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'ADC1 ADC2 swap',0
  Capabilities: enum
  Items: 'Off' 'On'
  Item0: 'Off'
Simple mixer control 'ADC1 Input FMINL',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'ADC1 Input LINEINL',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'ADC1 Input MIC1 Boost',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'ADC1 volume',0
  Capabilities: volume volume-joined
  Playback channels: Mono
  Capture channels: Mono
  Limits: 0 - 255
  Mono: 160 [63%]
Simple mixer control 'ADC2 Input FMINR',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'ADC2 Input LINEINR',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'ADC2 Input MIC2 Boost',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'ADC2 volume',0
  Capabilities: volume volume-joined
  Playback channels: Mono
  Capture channels: Mono
  Limits: 0 - 255
  Mono: 160 [63%]
Simple mixer control 'ADC3 ADC4 swap',0
  Capabilities: enum
  Items: 'Off' 'On'
  Item0: 'Off'
Simple mixer control 'ADC3 Input MIC3 Boost',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'ADC3 volume',0
  Capabilities: volume volume-joined
  Playback channels: Mono
  Capture channels: Mono
  Limits: 0 - 255
  Mono: 160 [63%]
Simple mixer control 'DAC volume',0
  Capabilities: volume
  Playback channels: Front Left - Front Right
  Capture channels: Front Left - Front Right
  Limits: 0 - 255
  Front Left: 160 [63%]
  Front Right: 160 [63%]
Simple mixer control 'HpSpeaker',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'LINEINL gain volume',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'LINEINR gain volume',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'LINEOUT',0
  Capabilities: pswitch pswitch-joined
  Playback channels: Mono
  Mono: Playback [off]
Simple mixer control 'LINEOUT volume',0
  Capabilities: volume volume-joined
  Playback channels: Mono
  Capture channels: Mono
  Limits: 0 - 31
  Mono: 26 [84%]
Simple mixer control 'LINEOUTL Output Select',0
  Capabilities: enum
  Items: 'DAC_SINGLE' 'DAC_DIFFER'
  Item0: 'DAC_DIFFER'
Simple mixer control 'LINEOUTR Output Select',0
  Capabilities: enum
  Items: 'DAC_SINGLE' 'DAC_DIFFER'
  Item0: 'DAC_DIFFER'
Simple mixer control 'MIC1 Input Select',0
  Capabilities: enum
  Items: 'MIC_DIFFER' 'MIC_SINGLE'
  Item0: 'MIC_DIFFER'
Simple mixer control 'MIC1 gain volume',0
  Capabilities: volume volume-joined
  Playback channels: Mono
  Capture channels: Mono
  Limits: 0 - 31
  Mono: 31 [100%]
Simple mixer control 'MIC2 Input Select',0
  Capabilities: enum
  Items: 'MIC_DIFFER' 'MIC_SINGLE'
  Item0: 'MIC_DIFFER'
Simple mixer control 'MIC2 gain volume',0
  Capabilities: volume volume-joined
  Playback channels: Mono
  Capture channels: Mono
  Limits: 0 - 31
  Mono: 31 [100%]
Simple mixer control 'MIC3 Input Select',0
  Capabilities: enum
  Items: 'MIC_DIFFER' 'MIC_SINGLE'
  Item0: 'MIC_DIFFER'
Simple mixer control 'MIC3 gain volume',0
  Capabilities: volume volume-joined
  Playback channels: Mono
  Capture channels: Mono
  Limits: 0 - 31
  Mono: 31 [100%]
Simple mixer control 'codec hub mode',0
  Capabilities: enum
  Items: 'hub_disable' 'hub_enable'
  Item0: 'hub_disable'
Simple mixer control 'digital volume',0
  Capabilities: volume volume-joined
  Playback channels: Mono
  Capture channels: Mono
  Limits: 0 - 63
  Mono: 63 [100%]
```
{% endfold %}
>
> {% fold info @å¿«é€ŸæŸ¥çœ‹éŸ³é¢‘ç›¸å…³çš„è®¾å¤‡èŠ‚ç‚¹ %}
```bash
# å‘½ä»¤amixer controlsï¼šå¿«é€ŸæŸ¥çœ‹éŸ³é¢‘ç›¸å…³çš„è®¾å¤‡èŠ‚ç‚¹
root@TinaLinux:/# amixer controls

numid=17,iface=MIXER,name='Headphone volume'
numid=30,iface=MIXER,name='Headphone Switch'
numid=12,iface=MIXER,name='FMINL gain volume'
numid=13,iface=MIXER,name='FMINR gain volume'
numid=2,iface=MIXER,name='ADC1 ADC2 swap'
numid=24,iface=MIXER,name='ADC1 Input FMINL Switch'
numid=25,iface=MIXER,name='ADC1 Input LINEINL Switch'
numid=23,iface=MIXER,name='ADC1 Input MIC1 Boost Switch'
numid=6,iface=MIXER,name='ADC1 volume'
numid=27,iface=MIXER,name='ADC2 Input FMINR Switch'
numid=28,iface=MIXER,name='ADC2 Input LINEINR Switch'
numid=26,iface=MIXER,name='ADC2 Input MIC2 Boost Switch'
numid=7,iface=MIXER,name='ADC2 volume'
numid=3,iface=MIXER,name='ADC3 ADC4 swap'
numid=29,iface=MIXER,name='ADC3 Input MIC3 Boost Switch'
numid=8,iface=MIXER,name='ADC3 volume'
numid=5,iface=MIXER,name='DAC volume'
numid=31,iface=MIXER,name='HpSpeaker Switch'
numid=14,iface=MIXER,name='LINEINL gain volume'
numid=15,iface=MIXER,name='LINEINR gain volume'
numid=32,iface=MIXER,name='LINEOUT Switch'
numid=16,iface=MIXER,name='LINEOUT volume'
numid=18,iface=MIXER,name='LINEOUTL Output Select'
numid=19,iface=MIXER,name='LINEOUTR Output Select'
numid=20,iface=MIXER,name='MIC1 Input Select'
numid=9,iface=MIXER,name='MIC1 gain volume'
numid=21,iface=MIXER,name='MIC2 Input Select'
numid=10,iface=MIXER,name='MIC2 gain volume'
numid=22,iface=MIXER,name='MIC3 Input Select'
numid=11,iface=MIXER,name='MIC3 gain volume'
numid=33,iface=MIXER,name='Soft Volume Master'
numid=1,iface=MIXER,name='codec hub mode'
numid=4,iface=MIXER,name='digital volume'
```

```bash
# ä½¿ç”¨å‘½ä»¤amixer cgetï¼šå¿«é€ŸæŸ¥çœ‹å•ä¸ªéŸ³é¢‘ç›¸å…³è®¾å¤‡èŠ‚ç‚¹çš„å½“å‰çŠ¶æ€
amixer cget numid=30,iface=MIXER,name='Headphone Switch'             # æŸ¥çœ‹è€³æœºè¾“å‡º
```
{% endfold %}
>
> {% fold info @ä¿®æ”¹éŸ³é¢‘è®¾å¤‡çš„å‚æ•° %}
```bash
# ä¿®æ”¹éŸ³é¢‘è®¾å¤‡çš„å‚æ•°
amixer -D hw:audiocodec cset name='Headphone Switch' 1                # å¼€å¯è€³æœºè¾“å‡º
amixer -D hw:audiocodec cset name='Headphone Volume' 3                # è®¾å®šéŸ³é‡

# æˆ–è€…ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ï¼ˆæ•ˆæœä¸€æ ·
amixer cset numid=30,iface=MIXER,name='Headphone Switch' 1            # å¼€å¯è€³æœºè¾“å‡º
amixer cset numid=17,iface=MIXER,name='Headphone volume' 3            # è®¾å®šéŸ³é‡
```
{% endfold %}

#### ç®€æ˜“éŸ³è§†é¢‘æ’­æ”¾å™¨ï¼ˆSimple Player

##### å…‹éš†
> è¿™ä¸ªåŠŸèƒ½æ˜¯ä»ä½œè€…çš„ä»“åº“æ‰¾åˆ°çš„ï¼Œæ„Ÿè°¢å¼€æºï¼šhttps://gitee.com/fhcloud/tplayer_kbd

##### ä¿®æ”¹
æŠŠè¿™ä¸ªä»“åº“å…‹éš†ä¸‹æ¥ä¹‹åï¼Œä½ éœ€è¦ä¿®æ”¹ä¸€äº›æ–‡ä»¶å½“ä¸­çš„è·¯å¾„ä¸ºè‡ªå·±è™šæ‹Ÿæœºå½“ä¸­çš„è·¯å¾„ï¼ˆä»¥åˆ†äº«çš„è™šæ‹Ÿæœºä¸ºä¾‹ï¼š

```bash
# env
export STAGING_DIR=/home/taiji/tina-sdk/out/t113-pi/staging_dir/target
```

```cmake
# CMakeLists.txt

set(CMAKE_C_COMPILER "/home/taiji/tina-sdk/prebuilt/gcc/linux-x86/arm/toolchain-sunxi-musl/toolchain/bin/arm-openwrt-linux-gcc")

include_directories(
        .
        "/home/taiji/tina-sdk/out/t113-pi/staging_dir/target/usr/include"
        "/home/taiji/tina-sdk/out/t113-pi/staging_dir/target/usr/include/allwinner"
        "/home/taiji/tina-sdk/out/t113-pi/staging_dir/target/usr/include/allwinner/include/"
)

link_directories(
        "/home/taiji/tina-sdk/out/t113-pi/staging_dir/target/lib"
        "/home/taiji/tina-sdk/out/t113-pi/staging_dir/target/usr/lib"
)
```

```c
// main.c
// æˆ‘ä½¿ç”¨çš„86å±åˆ†è¾¨ç‡æ˜¯480x480ï¼Œæ‰€ä»¥ä¿®æ”¹ä¸€ä¸‹LCDå®½åº¦çš„å®å®šä¹‰ä¸º480.0

// #define LCD_WIDTH 720.0
#define LCD_WIDTH 480.0
```

##### ç¼–è¯‘
ä¿®æ”¹å¥½ä»¥ä¸Šæ–‡ä»¶ä»¥åï¼ŒæŒ‰é¡ºåºæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
mkdir build
cd build/
cmake ..
make
```

##### æµ‹è¯•
æœ€åæŠŠç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶`tplayer_kbd`é€šè¿‡`adb`ä¼ è¾“åˆ°å¼€å‘æ¿ä¸Šï¼Œç„¶åå†ä¼ å‡ ä¸ª`mp3`ã€`mp4`æ–‡ä»¶ç”¨äºæµ‹è¯•ï¼Œå°½é‡éƒ½æŠŠæ–‡ä»¶ä¼ åˆ°`/mnt/UDISK/`è·¯å¾„ä¸‹å§ï¼Œè¿™é‡Œæ˜¯ç”¨æˆ·å­˜æ”¾æ–‡ä»¶çš„åŒºåŸŸï¼Œä¸ä¼šå¯¹å…¶ä»–æ–‡ä»¶æœ‰å½±å“ï¼Œæ–‡ä»¶ä¹Ÿä¸ä¼šæ„å¤–è¢«åˆ é™¤ã€‚

ç„¶åï¼Œæˆ‘ä»¬æ¥æµ‹è¯•ä¸€ä¸‹ä¾‹ç¨‹ï¼š

```bash
./tplayer_kbd test1.mp4 # æ’­æ”¾è§†é¢‘

./tplayer_kbd test2.mp3 # æ’­æ”¾éŸ³é¢‘

# åœ¨æ’­æ”¾è§†é¢‘æˆ–è€…éŸ³é¢‘çš„æ—¶å€™ï¼Œå‘½ä»¤è¡Œè¾“å…¥ç‰¹å®šçš„å­—ç¬¦å¯ä»¥å¯¹éŸ³è§†é¢‘åšè°ƒæ•´

l # å¾ªç¯æ¨¡å¼ï¼Œæ’­æ”¾ç»“æŸä¹‹åé‡å¤æ’­æ”¾
q # é€€å‡ºç¨‹åº
p # æš‚åœæ’­æ”¾/æ¢å¤æ’­æ”¾
/ # å‡å°éŸ³é‡ï¼ˆ-5ï¼‰
* # å¢å¤§éŸ³é‡ï¼ˆ+5ï¼‰
f # æ‰“å°å½“å‰è§†é¢‘å¸§ç‡
t # æ‰“å°å½“å‰æ’­æ”¾ä½ç½®
w # å‰è¿›ï¼ˆ+60sï¼‰
s # é€€å›ï¼ˆ-60sï¼‰
a # å‰è¿›ï¼ˆ+10sï¼‰
d # é€€å›ï¼ˆ-10sï¼‰
m # å½“å‰æ’­æ”¾çš„éŸ³è§†é¢‘çš„è¯¦ç»†å‚æ•°å±æ€§
```

å±•ç¤ºä¸€ä¸‹æˆ‘çš„å®é™…æ•ˆæœï¼Œå¼¹é’¢ç´çš„å¸…è€å¤´å¤§å®¶åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰äº†å§hahaï¼š

<!-- ![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-5.jpg) -->
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-5.jpg)

#### å…³äºUç›˜çš„æŒ‚è½½

è¿™é‡ŒåŸºäºå…¨å¿—çš„å¼€å‘æŒ‡å—[Tina_Linux_å­˜å‚¨_å¼€å‘æŒ‡å—](https://zhangkeliang0627.github.io/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/Tina_Linux_å­˜å‚¨_å¼€å‘æŒ‡å—.pdf)ç®€å•è®²è§£ä¸€ä¸‹Uç›˜å¦‚ä½•æŒ‚è½½ã€‚

å½“æˆ‘ä»¬å¾€å¼€å‘æ¿çš„USBå£æ’å…¥Uç›˜æ—¶ï¼Œè®¾å¤‡ä¼šè‡ªåŠ¨è¯†åˆ«åˆ°Uç›˜ï¼Œä½ å¯ä»¥åœ¨`dev`æ–‡ä»¶å¤¹ä¸‹çœ‹åˆ°æ–°å¢äº†è¯¸å¦‚`sda`çš„è®¾å¤‡ï¼Œæ­¤æ—¶è¯´æ˜å’±ä»¬çš„Uç›˜å·²ç»è¿æ¥åˆ°å¼€å‘æ¿ï¼Œæ¥ä¸‹æ¥æ‰§è¡Œ`mount /dev/sda /mnt/exUDISK/`æŒ‚è½½Uç›˜è®¾å¤‡åˆ°`/mnt/exUDISK`æ–‡ä»¶å¤¹ä¸­ã€‚é¡ºåˆ©çš„è¯ï¼Œæ¥ä¸‹æ¥cdåˆ°è¯¥æ–‡ä»¶å¤¹ï¼Œä½ å°±èƒ½è¯»å–åˆ°Uç›˜å½“ä¸­çš„å†…å®¹å•¦ï¼

<!-- ![é»˜è®¤æŒ‚è½½è®¾å¤‡èŠ‚ç‚¹](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-5.png) -->
![é»˜è®¤æŒ‚è½½è®¾å¤‡èŠ‚ç‚¹](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-5.png)

##### è‡ªåŠ¨æŒ‚è½½

...

æ›´å¤šçš„å†…å®¹ï¼Œçœ‹å¼€å‘æŒ‡å—å§ï¼ˆç¬‘ï¼

#### å‘½ä»¤è¡Œæ—¥å¿—è¾“å‡ºåˆ°LCDå±å¹•

> æ–‡ç« å‚è€ƒï¼šhttps://bbs.aw-ol.com/topic/4223/t113-s3-logè¾“å‡ºåˆ°rgbå±å¹•

##### ä¿®æ”¹env.cfg

env.cfgçš„è·¯å¾„å‚è€ƒ`/home/hugokkl/tina-d1-h/device/config/chips/t113/configs/100ask/env.cfg`

<!-- ![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-6.png) -->
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-6.png)

##### ä¿®æ”¹kernel_menuconfig

<!-- ![å‹¾é€‰(1](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-7.png)
![å‹¾é€‰(2](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-8.png)
![æœç´¢"Framebuffer"](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-9.png)
![é€‰æ‹©"1"](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-10.png)
![å‹¾é€‰(3](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-11.png) -->

![å‹¾é€‰(1](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-7.png)
![å‹¾é€‰(2](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-8.png)
![æœç´¢"Framebuffer"](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-9.png)
![é€‰æ‹©"1"](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-10.png)
![å‹¾é€‰(3](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-11.png)

ç„¶åå°±é…ç½®å®Œæˆï¼Œé‡æ–°ç¼–è¯‘æ‰“åŒ…å•¦ï¼ä¸‹é¢æ˜¯æ˜¾ç¤ºæ•ˆæœå±•ç¤ºï¼š

<!-- ![](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-6.jpg) -->
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-6.jpg)

#### LVGLç¤ºä¾‹æµ‹è¯•

äº¤æµç¾¤ä¸­æä¾›çš„è™šæ‹Ÿæœºä¸­åˆšå¥½æä¾›äº†ä¸€ä»½LVGLæµ‹è¯•çš„ç¨‹åº`lvgl_taiji`ï¼Œå’±ä»¬æ‹¿æ¥ç”¨ä¸€ç”¨ï¼

å…ˆcdåˆ°`lvgl_taiji`æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç¼–è¯‘ç¨‹åºï¼š
```bash
cd build/
./build_lv_taiji
```
ç„¶åå°†ç¼–è¯‘å‡ºæ¥çš„æ‰§è¡Œæ–‡ä»¶`lv_taiji`é€šè¿‡adbä¸¢åˆ°å¼€å‘æ¿å½“ä¸­è¿è¡Œå°±å¯ä»¥å’¯ï¼

...

#### è®¾å¤‡å¼€æœºåç¨‹åºè‡ªå¯åŠ¨

æœ‰äº›æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è¦åœ¨è®¾å¤‡ä¸Šç”µå¼€æœºä¹‹åï¼Œä¸æƒ³é€šè¿‡å‘½ä»¤è¡Œè¾“å…¥ï¼Œè‡ªåŠ¨åŠ è½½ä¸€äº›å†…æ ¸æ¨¡å—ï¼Œæ‰§è¡ŒæŸäº›å‘½ä»¤æˆ–è€…ç¨‹åºæ—¶ï¼Œå°±ä¼šç”¨åˆ°ä»¥ä¸‹çš„æ“ä½œï¼

ä¿®æ”¹å¼€å‘æ¿å½“ä¸­çš„`/etc/rc.local`æ–‡ä»¶ï¼ŒåŠ å…¥è‡ªå·±æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤ï¼š
```bash
# /etc/rc.local file

# åœ¨exit 0å‰åŠ å…¥è‡ªå·±æƒ³è¦æ‰§è¡Œçš„å‘½ä»¤ï¼Œexit 0ä¸èƒ½åˆ é™¤å“¦ï¼
# å¦‚ä¸‹ï¼Œæˆ‘å…ˆcdåˆ°å¯¹åº”çš„æ–‡ä»¶å¤¹ï¼Œç„¶åå†æ‰§è¡Œäº†ä¸€ä¸ªç¨‹åº

# Put your custom commands here that should be executed once
# the system init finished. By default this file does nothing.
cd /mnt/UDISK && ./eMP_mainPage
exit 0
```

#### å…³äºä¸²å£è®¾å¤‡
åœ¨è¿™å—å¼€å‘æ¿ä¸­ï¼ŒåŸä½œè€…è®¾è®¡ä½¿ç”¨uart0ä½œä¸ºconsoleçš„è¾“å‡ºå£ï¼ŒåŒæ—¶ä¹Ÿåœ¨å¼€å‘æ¿ä¾§é¢ç•™ä¸‹äº†ä¸¤ä¸ªä¸²å£ä¾›å¤§å®¶è‡ªè¡ŒDIYï¼Œåˆ†åˆ«æ˜¯ï¼šuart3å’Œuart5ï¼Œä½†æ˜¯æä¾›çš„è™šæ‹Ÿæœºå½“ä¸­çš„è®¾å¤‡æ ‘é‡Œå¹¶æ²¡æœ‰ä½¿èƒ½è¿™ä¸¤ä¸ªä¸²å£è®¾å¤‡ï¼Œäºæ˜¯å¦‚æœä½ æƒ³è¦ä½¿ç”¨è¿™ä¸¤ä¸ªé¢å¤–çš„ä¸²å£ï¼Œå°±éœ€è¦æ‰‹åŠ¨è®¾ç½®ï¼Œä¸‹é¢æˆ‘ç²—ç•¥åœ°æ¼”ç¤ºä¸€ä¸‹ï¼Œå¦‚ä½•åœ¨è®¾å¤‡æ ‘ä¸­è®¾ç½®ä¸²å£é©±åŠ¨ï¼ˆä»¥uart3ä¸ºä¾‹ï¼š

é¦–å…ˆå»åˆ°`~/tina-sdk/device/config/chips/t113/configs/pi/linux-5.4/board.dts`.

æ‰“å¼€`board.dts`è®¾å¤‡æ ‘æ–‡ä»¶ï¼Œåšä»¥ä¸‹ä¿®æ”¹ï¼š

å‚ç…§ä¸‹åˆ—æ­¥éª¤å›¾ï¼ŒæŠŠuart3å¯¹åº”çš„å¼•è„šè¿›è¡Œä¿®æ”¹ã€ç„¶åæŠŠstatusæ”¹ä¸º`okay`ï¼Œç»“æŸï¼

ç„¶åï¼Œä½ å°±å¯ä»¥é‡æ–°ç¼–è¯‘å†…æ ¸ï¼Œæ‰“åŒ…é•œåƒå•¦ã€‚

æœ€åä½ å¯ä»¥åœ¨å’±ä»¬çš„å¼€å‘æ¿ä¸Š`cat /dev/ttyS*`ï¼Œå¯ä»¥çœ‹åˆ°`ttyS3`ä¸²å£è®¾å¤‡å·²ç»è¢«æ³¨å†Œå­˜åœ¨å•¦ï¼Œç„¶åä½ å°±å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨å®ƒï¼

{% note warning %}
æ³¨æ„ï¼šè¦ç¡®å®šæ‰€é€‰æ‹©çš„å¼•è„šæ²¡æœ‰è¢«åˆ«çš„å¤–è®¾å¤ç”¨å“Ÿï¼
{% endnote %}

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-14.png" alt="å¼€å‘æ¿å¤–æ¥å¼•è„šå›¾" width = "600" height = "400" style="border-radius: 15px;">
<figcaption>å¼€å‘æ¿å¤–æ¥å¼•è„šå›¾</figcaption>
</figure>

![uart -> æ­¥éª¤1](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-13.png)
![uart -> æ­¥éª¤2](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-12.png)

![uart -> æˆåŠŸ](images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-15.png)

```dts
&pio {

  uart3_pins_a: uart3_pins@0 {  /* For t113_evb */
    //pins = "PG8", "PG9";
    //pins = "PB6", "PB7";
    pins = "PE8", "PE9";
    function = "uart3";
    drive-strength = <10>;
    bias-pull-up;
  };

  uart3_pins_b: uart3_pins@1 {  /* For t113_evb */
    //pins = "PB6", "PB7";
    pins = "PE8", "PE9";
    function = "gpio_in";
  };

}

&uart3 {
	pinctrl-names = "default", "sleep";
	pinctrl-0 = <&uart3_pins_a>;
	pinctrl-1 = <&uart3_pins_b>;
	status = "okay";
};
```

_**TODO: åŸä½œè€…è¿˜é¢„ç•™äº†ä¸¤ä¸ªRS485çš„æ–¹å‘å¼•è„šï¼Œæ‰€ä»¥è¿™ä¸¤ä¸ªä¸²å£è¿˜å¯ä»¥ä½œä¸º485æ€»çº¿ï¼Œåé¢æœ‰ç©ºåšä¸€ä¸‹åˆ†äº«å§ï¼**_

#### USBæ‘„åƒå¤´æ¨æµ

> æ–‡ç« å‚è€ƒï¼šhttps://blog.csdn.net/qq_28877125/article/details/127824696

##### å†…æ ¸é…ç½®
86å±å¼€å‘æ¿æœ¬èº«çš„å›ºä»¶å¹¶æ²¡æœ‰æ‰“å¼€æ‘„åƒå¤´ç›¸å…³çš„é…ç½®ï¼Œå› æ­¤åœ¨æœ€å¼€å§‹ï¼Œæˆ‘ä»¬è¦å¯¹Tina-sdkè¿›è¡Œä¸€æ³¢é…ç½®ã€‚

Tinaæ–‡ä»¶ç³»ç»Ÿé…ç½®ï¼š`make menuconfig`
{% gi 7 3 %}

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-17.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-18.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-22.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-23.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-24.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-25.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-26.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>
{% endgi %}

è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œmjpg-streamerä¾èµ–libjpegï¼Œä½†æ˜¯æˆ‘ä»¬å‹¾é€‰çš„å›¾åƒåº“æ˜¯libjpeg-turboï¼Œé¡¾åæ€ä¹‰æ˜¯libjpegçš„åŠ å¼ºç‰ˆï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦åˆ°mjpg-streamerçš„makefileé‡Œä¿®æ”¹ä¸€ä¸‹ä¾èµ–ï¼š**å°†libjpegæ”¹ä¸ºlibjpeg-turbo**.

{% gi 2 2 %}

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-16.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-27.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-21.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

{% endgi %}


Linux Kernelé…ç½®ï¼š`make kernel_menuconfig`
{% gi 3 3 %}

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-19.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-20.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-21.png" alt="" width = "300" height = "200" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

{% endgi %}

ç„¶åé‡æ–°ç»™sdkç¼–è¯‘æ‰“åŒ…ï¼Œå°†é•œåƒçƒ§åˆ°sdå¡é‡Œï¼Œæ’å…¥æ¿å­ä¸Šç”µï¼æ¿å­çš„USBå£æ¥ä¸ŠUVCæ‘„åƒå¤´å³å¯ã€‚

å¦‚æœçœ‹åˆ°è®¾å¤‡èŠ‚ç‚¹å­˜åœ¨`/dev/video0`å’Œ`/dev/video1`ï¼Œé‚£å°±è¯´æ˜æ¿å­æ£€æµ‹åˆ°äº†æ‘„åƒå¤´ï¼Œå¦‚å›¾ï¼š

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-28.png" alt="" width = "400" height = "300" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

æ­¤æ—¶ï¼Œä½ å¯ä»¥ä½¿ç”¨æŒ‡ä»¤`v4l2-ctl -d /dev/video0 --list-formats-ext`ï¼Œæ¥çœ‹ä¸€ä¸‹è¿™ä¸ªæ‘„åƒå¤´æ”¯æŒçš„æ ¼å¼å’Œåˆ†è¾¨ç‡ï¼Œå¦‚å›¾ï¼š

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-29.png" alt="" width = "400" height = "300" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

##### æµè§ˆå™¨æ˜¾ç¤ºæ‘„åƒå¤´ç”»é¢

æå‰è”ç½‘ï¼è”ç½‘æˆ‘å°±ä¸å¤šè¯´äº†ï¼Œè´´ä¸¤æ¡æŒ‡ä»¤å‡ºæ¥ï¼Œæ²¡çœ‹æ˜ç™½çš„è¯è¿™é‡Œ[æœ‰ç¯‡æ–‡ç« :D](https://zhangkeliang0627.github.io/2025/01/20/åœ¨å…¨å¿—T113-S3çš„TinaLinuxä¸Šæ·»åŠ é©±åŠ¨æ”¯æŒ/README/#æ·»åŠ xr829é©±åŠ¨ï¼ˆWiFi-BLE)ï¼š
```bash
# æ‰«æé™„è¿‘çš„wifi
wifi_scan_results_test

# è¿æ¥wifi
wifi_connect_ap_test <wifi_ssid> <wifi_pwd>
```

ç„¶åæ¿å­ä¸Šè¾“å…¥æŒ‡ä»¤ï¼Œæ¨æµï¼š`mjpg_streamer -i "/usr/lib/input_uvc.so -r 640x480 -d /dev/video0 -y -f 30 -n" -o "/usr/lib/output_http.so"`.

ç„¶åæ‰“å¼€æµè§ˆå™¨è¾“å…¥ç½‘å€`http://<ä½ æ¿å­çš„ip>:8080/?action=stream`ï¼Œçœ‹åˆ°æœ‰ç”»é¢è¾“å‡ºï¼Œå°±è¯´æ˜æˆåŠŸå•¦ï¼

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-30.png" alt="" width = "400" height = "300" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

##### å±å¹•æ˜¾ç¤ºæ‘„åƒå¤´ç”»é¢

â€œå› ä¸ºæˆ‘çš„æ‘„åƒå¤´ä¸æ”¯æŒRGBæ¨¡å¼ï¼Œæ‰€ä»¥å°±è®¾ç½®æˆYUVæ ¼å¼çš„è¾“å‡ºæ¨¡å¼ï¼Œç„¶åå†å°†YUVæ ¼å¼è½¬æˆRGBæ ¼å¼çš„è§†é¢‘æµæ˜¾ç¤ºâ€ï¼ŒåŸä½œè€…å¦‚æ˜¯è¯´ï¼Œæºç å¦‚ä¸‹ï¼š
{% fold info @camera_test.c %}
```c
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <fcntl.h>
#include <unistd.h>
#include <ctype.h>
#include <errno.h>
#include <sys/mman.h>
#include <sys/time.h>
#include <asm/types.h>
#include <linux/videodev2.h>
#include <linux/fb.h>
#include <sys/stat.h>
#include <sys/ioctl.h>
#include <poll.h>
#include <math.h>
#include <wchar.h>
#include <time.h>
#include <stdbool.h>

#define CAM_WIDTH 640
#define CAM_HEIGHT 480

static char *dev_video;
static char *dev_fb0;

static char *yuv_buffer;
static char *rgb_buffer;
typedef unsigned int u32;
typedef unsigned short u16;
typedef unsigned char u8;
#define YUVToRGB(Y)                                                            \
	((u16)((((u8)(Y) >> 3) << 11) | (((u8)(Y) >> 2) << 5) | ((u8)(Y) >> 3)))
struct v4l2_buffer video_buffer;
/*å…¨å±€å˜é‡*/
int lcd_fd;
int video_fd;
static unsigned char *lcd_mem_p = NULL; //ä¿å­˜LCDå±æ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´çš„é¦–åœ°å€
struct fb_var_screeninfo vinfo;
struct fb_fix_screeninfo finfo;

char *video_buff_buff[4]; /*ä¿å­˜æ‘„åƒå¤´ç¼“å†²åŒºçš„åœ°å€*/
int video_height = 0;
int video_width = 0;
unsigned char *lcd_display_buff; //LCDæ˜¾å­˜ç©ºé—´
unsigned char *lcd_display_buff2; //LCDæ˜¾å­˜ç©ºé—´
static void errno_exit(const char *s)
{
	fprintf(stderr, "%s error %d, %s\n", s, errno, strerror(errno));
	exit(EXIT_FAILURE);
}

static int xioctl(int fh, int request, void *arg)
{
	int r;

	do {
		r = ioctl(fh, request, arg);
	} while (-1 == r && EINTR == errno);

	return r;
}

static int video_init(void)
{
	struct v4l2_capability cap;
	ioctl(video_fd, VIDIOC_QUERYCAP, &cap);

	struct v4l2_fmtdesc dis_fmtdesc;
	dis_fmtdesc.index = 0;
	dis_fmtdesc.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
	printf("-----------------------æ”¯æŒæ ¼å¼---------------------\n");
	while (ioctl(video_fd, VIDIOC_ENUM_FMT, &dis_fmtdesc) != -1) {
		printf("\t%d.%s\n", dis_fmtdesc.index + 1,
		       dis_fmtdesc.description);
		dis_fmtdesc.index++;
	}
	struct v4l2_format video_format;
	video_format.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
	video_format.fmt.pix.width = CAM_WIDTH;
	video_format.fmt.pix.height = CAM_HEIGHT;
	video_format.fmt.pix.pixelformat =
		V4L2_PIX_FMT_YUYV; //ä½¿ç”¨JPEGæ ¼å¼å¸§ï¼Œç”¨äºé™æ€å›¾åƒé‡‡é›†

	ioctl(video_fd, VIDIOC_S_FMT, &video_format);

	printf("å½“å‰æ‘„åƒå¤´æ”¯æŒçš„åˆ†è¾¨ç‡:%dx%d\n", video_format.fmt.pix.width,
	       video_format.fmt.pix.height);
	if (video_format.fmt.pix.pixelformat != V4L2_PIX_FMT_YUYV) {
		printf("å½“å‰æ‘„åƒå¤´ä¸æ”¯æŒYUYVæ ¼å¼è¾“å‡º.\n");
		video_height = video_format.fmt.pix.height;
		video_width = video_format.fmt.pix.width;
		//return -3;
	} else {
		video_height = video_format.fmt.pix.height;
		video_width = video_format.fmt.pix.width;
		printf("å½“å‰æ‘„åƒå¤´æ”¯æŒYUYVæ ¼å¼è¾“å‡º.width %d height %d\n",
		       video_height, video_height);
	}
	/*3. ç”³è¯·ç¼“å†²åŒº*/
	struct v4l2_requestbuffers video_requestbuffers;
	memset(&video_requestbuffers, 0, sizeof(struct v4l2_requestbuffers));
	video_requestbuffers.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
	video_requestbuffers.count = 4;
	video_requestbuffers.memory = V4L2_MEMORY_MMAP;
	if (ioctl(video_fd, VIDIOC_REQBUFS, &video_requestbuffers))
		return -4;
	printf("æˆåŠŸç”³è¯·çš„ç¼“å†²åŒºæ•°é‡:%d\n", video_requestbuffers.count);
	/*4. å¾—åˆ°æ¯ä¸ªç¼“å†²åŒºçš„åœ°å€: å°†ç”³è¯·çš„ç¼“å†²åŒºæ˜ å°„åˆ°è¿›ç¨‹ç©ºé—´*/
	struct v4l2_buffer video_buffer;
	memset(&video_buffer, 0, sizeof(struct v4l2_buffer));
	int i;
	for (i = 0; i < video_requestbuffers.count; i++) {
		video_buffer.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
		video_buffer.index = i;
		video_buffer.memory = V4L2_MEMORY_MMAP;
		if (ioctl(video_fd, VIDIOC_QUERYBUF, &video_buffer))
			return -5;
		/*æ˜ å°„ç¼“å†²åŒºçš„åœ°å€åˆ°è¿›ç¨‹ç©ºé—´*/
		video_buff_buff[i] =
			mmap(NULL, video_buffer.length, PROT_READ | PROT_WRITE,
			     MAP_SHARED, video_fd, video_buffer.m.offset);
		printf("ç¬¬%dä¸ªç¼“å†²åŒºåœ°å€:%#X\n", i, video_buff_buff[i]);
	}
	/*5. å°†ç¼“å†²åŒºæ”¾å…¥åˆ°é‡‡é›†é˜Ÿåˆ—*/
	memset(&video_buffer, 0, sizeof(struct v4l2_buffer));
	for (i = 0; i < video_requestbuffers.count; i++) {
		video_buffer.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
		video_buffer.index = i;
		video_buffer.memory = V4L2_MEMORY_MMAP;
		if (ioctl(video_fd, VIDIOC_QBUF, &video_buffer)) {
			printf("VIDIOC_QBUF error\n");
			return -6;
		}
	}
	printf("å¯åŠ¨æ‘„åƒå¤´é‡‡é›†\n");
	/*6. å¯åŠ¨æ‘„åƒå¤´é‡‡é›†*/
	int opt_type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
	if (ioctl(video_fd, VIDIOC_STREAMON, &opt_type)) {
		printf("VIDIOC_STREAMON error\n");
		return -7;
	}

	return 0;
}
int lcd_init(void)
{
	/*2. è·å–å¯å˜å‚æ•°*/
	if (ioctl(lcd_fd, FBIOGET_VSCREENINFO, &vinfo))
		return -2;
	printf("å±å¹•X:%d   å±å¹•Y:%d  åƒç´ ä½æ•°:%d\n", vinfo.xres, vinfo.yres,
	       vinfo.bits_per_pixel);
	//åˆ†é…æ˜¾å­˜ç©ºé—´,å®Œæˆå›¾åƒæ˜¾ç¤º
	lcd_display_buff =
		malloc(vinfo.xres * vinfo.yres * vinfo.bits_per_pixel / 8);
	/*3. è·å–å›ºå®šå‚æ•°*/
	if (ioctl(lcd_fd, FBIOGET_FSCREENINFO, &finfo))
		return -3;
	printf("smem_len=%d Byte,line_length=%d Byte\n", finfo.smem_len,
	       finfo.line_length);

	/*4. æ˜ å°„LCDå±ç‰©ç†åœ°å€åˆ°è¿›ç¨‹ç©ºé—´*/
	lcd_mem_p = (unsigned char *)mmap(0, finfo.smem_len,
					  PROT_READ | PROT_WRITE, MAP_SHARED,
					  lcd_fd, 0); //ä»æ–‡ä»¶çš„é‚£ä¸ªåœ°æ–¹å¼€å§‹æ˜ å°„
	memset(lcd_mem_p, 0xFFFFFF, finfo.smem_len);
	printf("æ˜ å°„LCDå±ç‰©ç†åœ°å€åˆ°è¿›ç¨‹ç©ºé—´\n");
	return 0;
}

static void close_device(void)
{
	if (-1 == close(video_fd))
		errno_exit("close");
	video_fd = -1;

	if (-1 == close(lcd_fd))
		errno_exit("close");
	lcd_fd = -1;
}

static void open_device(void)
{
	video_fd = open(dev_video, O_RDWR /* required */ | O_NONBLOCK, 0);
	if (-1 == video_fd) {
		fprintf(stderr, "Cannot open '%s': %d, %s\n", dev_video, errno,
			strerror(errno));
		exit(EXIT_FAILURE);
	}

	lcd_fd = open(dev_fb0, O_RDWR, 0);
	if (-1 == lcd_fd) {
		fprintf(stderr, "Cannot open '%s': %d, %s\n", dev_fb0, errno,
			strerror(errno));
		exit(EXIT_FAILURE);
	}
}
/*
å°†YUVæ ¼å¼æ•°æ®è½¬ä¸ºRGB
*/
void yuv_to_rgb(unsigned char *yuv_buffer, unsigned char *rgb_buffer,
		int iWidth, int iHeight)
{
	int x;
	int z = 0;
	unsigned char *ptr = rgb_buffer;
	unsigned char *yuyv = yuv_buffer;

	for (x = 0; x < iWidth * iHeight; x++) {
		int r, g, b;
		int y, u, v;
		if (!z)
			y = yuyv[0] << 8;
		else
			y = yuyv[2] << 8;
		u = yuyv[1] - 128;
		v = yuyv[3] - 128;
		r = (y + (359 * v)) >> 8;
		g = (y - (88 * u) - (183 * v)) >> 8;
		b = (y + (454 * u)) >> 8;
		*(ptr++) = (b > 255) ? 255 : ((b < 0) ? 0 : b); // b color
		*(ptr++) = (g > 255) ? 255 : ((g < 0) ? 0 : g); // g color
		*(ptr++) = (r > 255) ? 255 : ((r < 0) ? 0 : r); // r color
		*(ptr++) = 0xff;                                // a color
		if (z++) {
			z = 0;
			yuyv += 4;
		}
	}
}

void rgb24_to_rgb565(char *rgb24, char *rgb16)
{
	int i = 0, j = 0;
	for (i = 0; i < 240 * 240 * 3; i += 3) {
		rgb16[j] = rgb24[i] >> 3; // B
		rgb16[j] |= ((rgb24[i + 1] & 0x1C) << 3); // G
		rgb16[j + 1] = rgb24[i + 2] & 0xF8; // R
		rgb16[j + 1] |= (rgb24[i + 1] >> 5); // G

		j += 2;
	}
}

static void lcd_image(unsigned int start_x, unsigned int end_x,
                    unsigned int start_y, unsigned int end_y,
                    unsigned char* color)
{
    unsigned long i;
    unsigned int j;
    /* å¡«å……é¢œè‰² */
    i = start_y * vinfo.xres; //å®šä½åˆ°èµ·ç‚¹è¡Œé¦–

    for ( ; start_y <= end_y; start_y++, i+=(vinfo.xres*4))
    {
        for (j = start_x; j <= end_x*4; j++)
        {
            lcd_mem_p[i + j] = *color++;
        }
		*color--;
    }
}

int main(int argc, char **argv)
{
	dev_video = "/dev/video0";
	dev_fb0 = "/dev/fb0";
	open_device();
	video_init();
	lcd_init();
	/*3. è¯»å–æ‘„åƒå¤´çš„æ•°æ®*/
	struct pollfd video_fds;
	video_fds.events = POLLIN;
	video_fds.fd = video_fd;

	memset(&video_buffer, 0, sizeof(struct v4l2_buffer));
	rgb_buffer = malloc(CAM_WIDTH * CAM_HEIGHT * 4);
	yuv_buffer = malloc(CAM_WIDTH * CAM_HEIGHT * 4);
	unsigned char *rgb_p;
	int w, h, i, j;
	unsigned char r, g, b;
	unsigned int c;
	while (1) {
		/*ç­‰å¾…æ‘„åƒå¤´é‡‡é›†æ•°æ®*/
		poll(&video_fds, 1, -1);
		/*å¾—åˆ°ç¼“å†²åŒºçš„ç¼–å·*/
		video_buffer.type = V4L2_BUF_TYPE_VIDEO_CAPTURE;
		video_buffer.memory = V4L2_MEMORY_MMAP;
		ioctl(video_fd, VIDIOC_DQBUF, &video_buffer);
		//printf("å½“å‰é‡‡é›†OKçš„ç¼“å†²åŒºç¼–å·:%d,åœ°å€:%#X num:%d\n",
		       //video_buffer.index, video_buff_buff[video_buffer.index],
		       //strlen(video_buff_buff[video_buffer.index]));

		/*å¯¹ç¼“å†²åŒºæ•°æ®è¿›è¡Œå¤„ç†*/
		yuv_to_rgb(video_buff_buff[video_buffer.index], yuv_buffer, video_height, video_width);
		//rgb24_to_rgb565(yuv_buffer, rgb_buffer);


		//printf("æ˜¾ç¤ºå±è¿›è¡Œæ˜¾ç¤º\n");
		//æ˜¾ç¤ºå±è¿›è¡Œæ˜¾ç¤º: å°†æ˜¾å­˜ç©ºé—´çš„æ•°æ®æ‹·è´åˆ°LCDå±è¿›è¡Œæ˜¾ç¤º
		/*memcpy(lcd_mem_p, yuv_buffer,
		       vinfo.xres * vinfo.yres * vinfo.bits_per_pixel / 8);*/
		// video stream show
		lcd_image(0, 640, 0, 480, yuv_buffer);

		//printf("buffer size: %d\r\n", (vinfo.xres * vinfo.yres * vinfo.bits_per_pixel / 8));
		/*å°†ç¼“å†²åŒºæ”¾å…¥é‡‡é›†é˜Ÿåˆ—*/
		ioctl(video_fd, VIDIOC_QBUF, &video_buffer);
		//printf("å°†ç¼“å†²åŒºæ”¾å…¥é‡‡é›†é˜Ÿåˆ—\n");
	}
	/*4. å…³é—­è§†é¢‘è®¾å¤‡*/
	close(video_fd);

	return 0;
}
```
{% endfold %}

ä½¿ç”¨Tina-sdkçš„äº¤å‰ç¼–è¯‘å·¥å…·é“¾è¿›è¡Œäº¤å‰ç¼–è¯‘ï¼Œæ¨å…¥ï¼Œè¿è¡Œï¼š
```bash
# ç¼–è¯‘
arm-openwrt-linux-gcc camera_test.c -o camera2framebuffer

# æ¨å…¥å¼€å‘æ¿
adb push camera2framebuffer /mnt/UDISK

# è¿è¡Œ
cd /mnt/UDISK && ./camera2framebuffer
```

é¡ºåˆ©çš„è¯ï¼Œå°±èƒ½åœ¨å±å¹•ä¸Šçœ‹åˆ°è§†é¢‘æµå•¦ï¼

<figure>
<img src="/images/å…³äºåŸºäºå…¨å¿—T113-S3çš„86-Screençš„ä¸€åˆ‡/image-31.jpg" alt="" width = "400" height = "300" style="border-radius: 15px;">
<figcaption></figcaption>
</figure>

---

### å†™åœ¨åé¢

**é¸£è°¢ï¼š**

- [@FanHuaCloud](https://oshwhub.com/fanhuacloud/works)ï¼š[åŸºäºT113-S3çš„86-Screen](https://oshwhub.com/fanhuacloud/t113-s3-86panel)

...

---