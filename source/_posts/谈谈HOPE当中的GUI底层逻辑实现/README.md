---
title: è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°âœ¨
excerpt: ç¬¬ä¸€æ¬¡èŒç”Ÿå¦‚æ­¤æƒ³è¦æ¿€çƒˆè¿½å¯»æŠ€æœ¯å¤§ä½¬çš„å¿ƒæ„¿ï¼Œæ„Ÿæ©ï¼Œæ„Ÿè°¢ï¼
tags: [Project, STM32, GUI, MCU]
# index_img: /images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/index-cover.jpg
# banner_img: /images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/index-cover.jpg
index_img: https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/index-cover.jpg
banner_img: https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/index-cover.jpg
categories: Project Page
comment: 'twikoo'
date: 2024-8-31 11:55:00

---

### è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°âœ¨
### Let's talk about how to make a GUI like HOPE's !!!
### Project nameï¼šHOPE
### Authorï¼š@kkl

<p class="note note-warning">æœ¬æ–‡ç”±äºGifå›¾ç‰‡å­˜å‚¨è¾ƒå¤§ï¼Œè¯·è€å¿ƒç­‰å¾…å›¾ç‰‡åŠ è½½ğŸ™‡â€â™‚ï¸ğŸ™‡â€â™‚ï¸...</p>

---

<!-- {% gi 5 2-3 %}

<center><img src="/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-0.jpg" alt="exhibition" width="100%;"></center>
<center><img src="/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-1.jpg" alt="exhibition" width="100%;"></center>
<center><img src="/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-2.jpg" alt="exhibition" width="100%;"></center>
<center><img src="/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-3.jpg" alt="exhibition" width="100%;"></center>
<center><img src="/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-4.jpg" alt="exhibition" width="100%;"></center>

{% endgi %} -->

{% gi 5 2-3 %}

<center><img src="https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-0.jpg" alt="exhibition" width="100%;"></center>
<center><img src="https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-1.jpg" alt="exhibition" width="100%;"></center>
<center><img src="https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-2.jpg" alt="exhibition" width="100%;"></center>
<center><img src="https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-3.jpg" alt="exhibition" width="100%;"></center>
<center><img src="https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-4.jpg" alt="exhibition" width="100%;"></center>

{% endgi %}

## å‰è®°

è¯¥ä»å“ªé‡Œå¼€å§‹è¯´èµ·å‘¢ï¼Ÿ

è®©æˆ‘å¼€å¯`HOPE`è¿™ä¸ªé¡¹ç›®çš„åŸå› å…¶å®æ˜¯éå¸¸æœºç¼˜å·§åˆçš„ï¼Œé¦–å…ˆæ˜¯23å¹´æš‘å‡æœŸé—´æˆ‘ä»¬æ­£åœ¨ç´§å¼ å‡†å¤‡ç”µèµ›ï¼Œéœ€è¦å‡†å¤‡äº›å¼€å‘æ¿ï¼Œä½†æ˜¯ç”±äºç»è´¹ä¸è¶³ï¼Œäºæ˜¯æ‰“ç®—è‡ªå·±åŠ¨æ‰‹åˆ¶ä½œï¼Œä¸°è¡£è¶³é£Ÿã€‚

å½“æ—¶æ­£å¥½çœ‹è§äº†**ç¨šæ™–å›**å‘å¸ƒçš„é¡¹ç›®`REF`ï¼ŒåŒ…æ‹¬ç¡¬ä»¶å’Œä»£ç æ¡†æ¶`MonoUI`éƒ½å¼€å‘åœ°éå¸¸çš„ä¼˜é›…ï¼Œä»¤äººæ„Ÿåˆ°é—æ†¾çš„æ˜¯ï¼Œé‚£æ—¶å¹¶æ²¡æœ‰å¼€æºï¼ˆç°åœ¨åº”è¯¥å·²ç»å¼€æºåœ¨ä»–çš„æœºæ¢°è‡‚é¡¹ç›®ä»“åº“å½“ä¸­ï¼Œäºæ˜¯æ‰“ç®—ä»å¤´åˆ°è„šç‹ ç‹ çš„å¤åˆ»ä¸€æ³¢ï¼

<!-- ![REF and MonoUI](/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-5.jpg) -->
<!-- ![UltraLink](/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-6.jpg) -->

![REF and MonoUI](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-5.jpg)
![UltraLink](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-6.jpg)

- è°ˆè°ˆç¡¬ä»¶

äºæ˜¯ï¼Œæˆ‘å°±å¼€å§‹åœ¨è‡ªå·±ä¸€æ­¥ä¸€æ­¥æ…¢æ…¢æ‘¸ç´¢ä¸‹ï¼Œç¬¬ä¸€ä¸ªHOPEçš„é›å½¢è¯ç”Ÿäº†ï¼ç´§æ¥ç€ï¼Œç§‰æŒç€å¿«é€Ÿè¿­ä»£çš„ç†å¿µï¼Œå¾ˆå¿«åœ°ï¼Œç¬¬äºŒç‰ˆã€ç¬¬ä¸‰ç‰ˆéƒ½æ¥è¸µè€Œè‡³...

<!-- ![HOPEçš„è®¾è®¡è‰ç¨¿å›¾](/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-11.jpg) -->

![HOPEçš„è®¾è®¡è‰ç¨¿å›¾](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-11.jpg)

<!-- {% gi 4 2-2 %}

![](/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-7.jpg)
![](/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-8.jpg)
![](/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-9.jpg)
![](/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-10.jpg)

{% endgi %} -->

{% gi 4 2-2 %}

![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-7.jpg)
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-8.jpg)
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-9.jpg)
![](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-10.jpg)

{% endgi %}

é‚£æ—¶å€™å°±æƒ³ä¸€ç›´æ— å¤´è‹è‡ä¸€æ ·ï¼Œç›®çš„æ€§ä¸æ˜ç¡®ï¼ŒæŠ€æœ¯ä¹Ÿä¸æˆç†Ÿï¼Œå”¯ä¸€æ‹¥æœ‰çš„å°±æ˜¯æ»¡è…”çƒ­è¡€ï¼Œä¸æ€•è‹¦ä¸æ€•ç´¯ï¼Œåšæ¢¦éƒ½åœ¨æƒ³ç€é¡¹ç›®æ€ä¹ˆä¼˜åŒ–ï¼Œæœ€åå‘¢ï¼Œä¹Ÿæ˜¯å¾ˆå¼€å¿ƒåšå‡ºäº†ç›®å‰è¿™ä¸ªæ¯”è¾ƒç¨³å®šçš„ç¡¬ä»¶ç‰ˆæœ¬ã€‚

- è°ˆè°ˆè½¯ä»¶

ç¡¬ä»¶è§£å†³ä»¥åï¼Œå™©æ¢¦æ‰çœŸæ­£å¼€å§‹ï¼Œå¯¹äºä¸€ä¸ªæ•°æ®ç»“æ„èœé¸Ÿè€Œè¨€ï¼Œå¦‚ä½•è®¾è®¡ä¸€ä¸ªä¼˜é›…çš„å•è‰²GUIå‘¢ï¼Ÿæ‰€ä»¥è¿™å°±æ˜¯ä»Šå¤©è¦ç€é‡è¦è®²çš„ä¸»é¢˜ï¼šè°ˆè°ˆHOPEå½“ä¸­åº•å±‚é€»è¾‘å®ç°ã€‚

<p class="note note-info">å½“ç„¶ï¼Œå¯¹äºHOPEï¼ŒåŒ…æ‹¬ä»£ç å’Œç¡¬ä»¶è®¾è®¡éƒ½æ¯”è¾ƒç¨šå«©ï¼Œä»…ä»…åªåšæä¾›æ€è·¯å’Œå‚è€ƒçš„ä½œç”¨ï¼ä»…ä»¥æ­¤åšå®¢ï¼Œçºªå¿µè¿™ä¸ªæœ‰è¶£çš„é¡¹ç›®hhhğŸ˜</p>

## å…³äºå¦‚ä½•æ¥è§¦åˆ°GUI

ç¬¬ä¸€æ¬¡æ¥è§¦GUIçš„åˆ¶ä½œæ˜¯æ¥è§¦åˆ°äº†UPä¸»å°è›‹æ˜¾ç’çš„è§†é¢‘[OLEDèœå•åŠ¨ç”»æ•™ç¨‹](https://www.bilibili.com/video/BV1RY411f7GT/)ã€‚

æ•™ç¨‹ä¸­çš„è¿™å¥—GUIæ¡†æ¶æ˜¯åŸºäº`U8G2å›¾åƒåº“`çš„ï¼Œå¤§è‡´çš„å®ç°æ–¹æ³•æ˜¯ï¼š

> é€šè¿‡æ³¨å†Œprocå‡½æ•°å’Œå¯¹åº”çš„çŠ¶æ€ä½åˆ°åˆ—è¡¨listå½“ä¸­ï¼Œç„¶åå¾ªç¯éå†listï¼Œæ¯”å¯¹å½“å‰çŠ¶æ€ä½å’Œlistå½“ä¸­çš„çŠ¶æ€ä½ï¼Œè‹¥ç›¸åŒï¼Œåˆ™æ‰§è¡Œå¯¹åº”çš„procå‡½æ•°ã€‚
> 
> procå‡½æ•°ä¸­åŒ…æ‹¬OLEDåŠ¨ç”»æ˜¾ç¤ºã€æŒ‰é’®å“åº”ç­‰äº¤äº’æ“ä½œã€èœå•é¡µé¢ä¹‹é—´åˆ‡æ¢ã€è¿‡æ¸¡åŠ¨ç”»ç­‰é€»è¾‘æ“ä½œï¼Œç®€å•æ˜“å­¦ï¼Œè™½ç„¶å…¨éƒ¨ä¸œè¥¿éƒ½æŒ¤åœ¨äº†ä¸€ä¸ªæ–‡ä»¶å¯¹å½“ä¸­ï¼Œéå¸¸çš„ä¸ä¼˜é›…ï¼Œä¹Ÿä¸æ˜“ç»´æŠ¤å’Œç§»æ¤ã€‚

ä½†æ˜¯å‘¢ï¼Œæ­£æ˜¯è¿™å¥—æ•™ç¨‹å¼€å¯äº†æˆ‘åœ¨GUIè®¾è®¡å¼€å‘å½“ä¸­çš„ä¸å½’è·¯ã€‚

æˆ‘ç¬¬ä¸€ä¸ªäº²è‡ªæ„æ€å¹¶è®¾è®¡çš„é¡¹ç›®ã€Œä¼ªè¯—äº‘ã€ï¼Œä¾¿æ˜¯ç¬¬ä¸€æ¬¡ç”¨ä¸Šäº†è¯¥GUIæ¡†æ¶ï¼Œæ‰¾ä¸ªæœºä¼šå¯ä»¥å†èŠèŠè¿™ä¸ªé¡¹ç›®ã€‚

<!-- ![ä¼ªè¯—äº‘](/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-12.jpg) -->

![ä¼ªè¯—äº‘](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-12.jpg)

## å…³äºHugoUIçš„åº•å±‚é€»è¾‘å®ç°

ç›®å‰HOPEå½“ä¸­ä½¿ç”¨çš„HugoUIæ˜¯æˆ‘ä»MonoUIè¿½æº¯åˆ°åˆ›å¤©è“å¤§ä½¬çš„çƒ™é“é¡¹ç›®ä¸­çš„GUIæ¡†æ¶ä¿®æ”¹è€Œæ¥çš„ï¼Œç›®å‰é‡‡ç”¨**é“¾è¡¨**çš„å½¢å¼å®ç°è¯¥GUIï¼Œåº•å±‚ä¾ç„¶åŸºäº`u8g2`ã€‚

HugoUIä¸»è¦åŒ…æ‹¬ä¸¤ä¸ªç»“æ„ä½“ï¼šèœå•é¡µé¢`Page`å’Œé¡µé¢æŒ‚ä»¶`Item`ã€‚

- èœå•é¡µé¢`Page`é¡¾åæ€ä¹‰ï¼Œå°±æ˜¯èœå•çš„æ¯ä¸€é¡µéƒ½æ˜¯ä¸€ä¸ªPageï¼Œç¿»é¡µæ—¶ä¾¿ä¼šåˆ‡æ¢Pageã€‚
- è€Œè¯¥é¡µé¢ä¸Šçš„æŒ‚ä»¶`Item`å°±åƒæ˜¯é¡µé¢ä¸Šçš„APPï¼Œè´Ÿè´£å®ç°ç‰¹å®šçš„åŠŸèƒ½ã€‚

```c
/* Itemçš„ç»“æ„ä½“ */
typedef struct HugoUI_item // å°æŒ‚ä»¶çš„ç»“æ„ä½“
{
    struct HugoUI_item *next;
    HugoUIItem_e funcType;  // ä½œç”¨ç±»å‹
    uint16_t itemId;        // å°æŒ‚ä»¶çš„id
    uint16_t lineId;        // åœ¨æ¯ä¸€é¡µçš„id
    // float item_x, item_x_trg;
    // float item_y, item_y_trg;
    uint8_t *pic;
    // uint8_t step;
    char *title; // å°æŒ‚ä»¶çš„åå­—
    char *msg;   // ITEM_MESSAGE
    char *desc;
    bool *flag; // ITEM_CHECKBOX and ITEM_RADIO_BUTTON and ITEM_SWITCH //å°æŒ‚ä»¶ç”¨äºè¿™äº›ä½œç”¨æ—¶çš„æ ‡å¿—ä½
    // bool flagDefault; // Factory default setting // æ¢å¤å‡ºå‚è®¾ç½®
    paramType *param;                                                     // ITEM_CHANGE_VALUE and ITEM_PROGRESS_BAR //å°æŒ‚ä»¶å¯æ”¹å˜çš„å‚æ•°
    uint8_t inPage;                                                       // ITEM_JUMP_PAGE // Itemåœ¨å“ªä¸€é¡µ
    uint8_t JumpPage;                                                     // å°†è¦è·³è½¬åˆ°å“ªä¸€ä¸ªpage
    uint8_t JumpItem;                                                     // å°†è¦è·³è½¬åˆ°å“ªä¸€ä¸ªItem
    void (*FuncCallBack)(void);                                           // å›è°ƒå‡½æ•° // ITEM_CHANGE_VALUE and ITEM_PROGRESS_BAR // è¯¥æŒ‚ä»¶çš„å‡½æ•°
    struct HugoUI_item *(*SetIconSrc)(const uint8_t *pic);                // ä¼ å…¥å›¾ç‰‡
    struct HugoUI_item *(*SetJumpId)(uint8_t pageId, uint8_t itemLineId); // ä¼ å…¥PageIdå’ŒItemLineId
    struct HugoUI_item *(*SetDescripition)(char *desc);                   // ä¼ å…¥descripition
    struct HugoUI_item *(*ReturnThisItem)(struct HugoUI_item *thisItem);  // è¿”å›è¯¥itemçš„æŒ‡é’ˆ
} HugoUIItem_t;
```

```c
/* Pageçš„ç»“æ„ä½“ */
typedef struct HugoUI_page
{
    struct HugoUI_page *next;
    HugoUIPage_e funcType;
    HugoUIItem_t *itemHead, *itemTail;
    char *title; // è¯¥é¡µçš„åå­—
    uint8_t pageId;
    uint16_t itemMax; // è¯¥pageå«æœ‰çš„itemæ•°
    float page_x, page_x_trg;
    float page_y, page_y_trg;
    float page_y_forlist, page_y_forlist_trg;

    void (*FuncCallBack)(void);
    struct HugoUI_page *(*SetPgaeFunCallBack)(void (*FuncCallBack)(void));

    void (*PageEventProc)(void);
    struct HugoUI_page *(*SetPgaeEventProc)(void (*PageEventProc)(void));

    void (*PageUIShow)(struct HugoUI_page *thispage, HugoUIItem_t *thisitem);
    struct HugoUI_page *(*SetPageUIShow)(void (*PgagUIShow)(struct HugoUI_page *thispage, HugoUIItem_t *thisitem));

    HugoUIItem_t *(*AddItem)(struct HugoUI_page *thisPage, char *title, HugoUIItem_e itemType, ...);
} HugoUIPage_t;
```

ä½¿ç”¨é“¾è¡¨çš„å½¢å¼ç¼–å†™GUIèœå•æ¡†æ¶çš„å¥½å¤„å°±æ˜¯ï¼ŒLayoutæ—¶éå¸¸çš„èˆ’é€‚ä¼˜é›…~

<!-- ![è¾ƒä¸ºä¼˜é›…èˆ’é€‚çš„UI-Layout](/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-13.jpg) -->

![è¾ƒä¸ºä¼˜é›…èˆ’é€‚çš„UI-Layout](https://hugokkl.oss-cn-shenzhen.aliyuncs.com/blog/images/è°ˆè°ˆHOPEå½“ä¸­çš„GUIåº•å±‚é€»è¾‘å®ç°/image-13.jpg)


<p class="note note-warning">ç­‰å¾…æ–½å·¥ğŸ™‡â€â™‚ï¸ğŸ™‡â€â™‚ï¸...</p>

## åè®°

- å…³è”çš„ä»“åº“[è¯·æˆ³è¿™é‡Œ;P](https://github.com/ZhangKeLiang0627/HOPE)ï¼Œæ‚¨å¯ä»¥åœ¨è¯¥ä»“åº“ä¸­è·å–é¡¹ç›®æºç å’ŒPCBæ‰“æ ·æ–‡ä»¶ã€‚
